.hud-top-bar{grid-column:1/-1;display:flex;justify-content:space-between;align-items:center;background:var(--glass-bg);backdrop-filter:var(--backdrop-blur);-webkit-backdrop-filter:var(--backdrop-blur);padding:.75rem 2rem;border-radius:var(--radius-md);border:1px solid var(--glass-border);box-shadow:var(--glass-shadow);pointer-events:auto;z-index:20;transition:var(--transition-normal)}.header-left,.header-right{display:flex;align-items:center;gap:var(--spacing-lg)}.game-logo{font-family:var(--font-display);font-size:1.5rem;background:linear-gradient(135deg,var(--color-accent-gold),var(--color-accent-primary));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;text-shadow:none;letter-spacing:.1em}.header-controls{display:flex;gap:var(--spacing-sm)}.hud-sidebar{display:flex;flex-direction:column;gap:var(--spacing-md);overflow-y:auto;max-height:calc(100vh - 100px);padding-right:4px;pointer-events:none;grid-row:2}.hud-left{grid-column:1}.hud-right{grid-column:3}.hud-sidebar::-webkit-scrollbar{width:4px}.hud-sidebar::-webkit-scrollbar-thumb{background:rgba(255,255,255,.2);border-radius:4px}.debug-panel,.panel{background:var(--parchment-bg);backdrop-filter:var(--backdrop-blur);-webkit-backdrop-filter:var(--backdrop-blur);box-shadow:0 8px 32px rgba(0,0,0,.6),inset 0 1px 0 rgba(255,220,150,.1),inset 0 -1px 0 rgba(0,0,0,.3);border:var(--parchment-border);border-radius:var(--radius-sm);padding:var(--spacing-md);margin-bottom:0;pointer-events:auto;overflow:hidden;position:relative;transition:var(--transition-normal)}.panel::before{content:'✦';position:absolute;top:6px;left:10px;font-size:.9rem;color:var(--color-accent-gold);opacity:.3;transition:var(--transition-normal)}.panel::after{content:'✦';position:absolute;top:6px;right:10px;font-size:.9rem;color:var(--color-accent-gold);opacity:.3;transition:var(--transition-normal)}.panel:hover::after,.panel:hover::before{opacity:.7;filter:drop-shadow(0 0 5px var(--color-accent-gold))}.debug-panel:hover,.panel:hover{border-color:var(--glass-border-highlight);background:var(--glass-bg-hover);transform:translateY(-2px);box-shadow:0 15px 40px rgba(0,0,0,.7),inset 0 1px 0 rgba(255,220,150,.15),0 0 20px rgba(218,165,32,.1)}.debug-panel h3,.panel h2{font-size:.9rem;font-weight:600;color:var(--color-text-primary);margin:0 0 var(--spacing-sm) 0;text-transform:uppercase;letter-spacing:.05em}.debug-section h4,.panel h3{font-size:.8rem;font-weight:500;color:var(--color-text-secondary);margin:var(--spacing-sm) 0}.debug-header,.panel-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-sm)}.close-btn,.panel-toggle{background:0 0;border:none;color:var(--color-text-secondary);cursor:pointer;font-size:1.2rem;padding:0;transition:transform .3s ease}.hero-panel{padding-bottom:var(--spacing-lg)}.hero-panel .hero-info{display:flex;flex-direction:row;align-items:center;gap:var(--spacing-md)}.hero-avatar{width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,var(--color-accent-primary),var(--color-accent-secondary));border:2px solid rgba(255,255,255,.3);display:flex;align-items:center;justify-content:center;font-size:1.4rem;box-shadow:0 0 15px rgba(168,85,247,.4);flex-shrink:0}.hero-details{flex:1;min-width:0}.hero-name{font-weight:600;color:var(--color-text-primary);font-size:1rem;margin-bottom:4px}.hero-stats-grid{display:flex;gap:12px;font-size:.85rem;margin-top:4px;color:var(--color-text-secondary)}.hero-stats-grid .stat-item{display:flex;align-items:center;gap:4px}.skill-list-container{margin-top:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-xs);border-top:1px solid var(--glass-border);padding-top:var(--spacing-sm)}.skills-header{font-size:.75rem;font-weight:600;text-transform:uppercase;color:var(--color-text-muted);letter-spacing:.05em;margin-bottom:4px}.movement-preview{margin-top:var(--spacing-sm);padding-top:var(--spacing-sm);border-top:1px solid var(--glass-border);display:flex;justify-content:space-between;align-items:center;font-size:.85rem;animation:fadeIn .3s ease-out}.preview-label{color:var(--color-text-secondary)}.preview-value{color:var(--color-accent-secondary);font-weight:700;font-size:1rem;text-shadow:0 0 8px rgba(236,72,153,.5)}.skill-item{display:flex;align-items:center;gap:var(--spacing-sm);padding:6px 10px;background:rgba(255,255,255,.03);border:1px solid var(--glass-border);border-radius:var(--radius-sm);font-size:.85rem;transition:var(--transition-fast)}.skill-item.active{cursor:pointer;background:rgba(168,85,247,.1);border-color:rgba(168,85,247,.3)}.skill-item.active:hover:not(.used){background:rgba(168,85,247,.2);border-color:var(--color-accent-primary);transform:translateX(4px)}.skill-item.used{opacity:.5;filter:grayscale(1);cursor:default}.skill-icon{font-size:1.1rem;flex-shrink:0}.skill-name{flex:1;color:var(--color-text-secondary)}.skill-status{font-size:.7rem;padding:2px 6px;border-radius:4px;background:rgba(0,0,0,.3);color:var(--color-text-muted)}.skill-item:not(.used) .skill-status{color:var(--color-mana-green);border:1px solid rgba(16,185,129,.3)}.action-grid{display:flex;flex-direction:column;gap:var(--spacing-sm)}.debug-panel.hidden{display:none}.debug-section{margin-bottom:var(--spacing-sm);border-bottom:1px solid rgba(255,255,255,.1);padding-bottom:var(--spacing-sm)}.debug-section button{font-size:.75rem;padding:2px 6px;margin:2px;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);border-radius:4px;color:#ccc;cursor:pointer}.debug-section button:hover{background:rgba(255,255,255,.2);color:#fff}.debug-toggle{width:100%;padding:var(--spacing-sm);background:rgba(0,0,0,.3);border:1px dashed var(--glass-border);margin-bottom:var(--spacing-sm);cursor:pointer;text-align:center;border-radius:var(--radius-md)}.movement-panel .movement-display{display:flex;align-items:center;justify-content:center;gap:var(--spacing-xs);font-size:1.2rem;padding:var(--spacing-xs)}.movement-panel .stat-icon{font-size:1.5rem}.movement-panel .stat-value{font-weight:700;font-size:1.5rem;color:var(--color-accent-gold)}.panel.collapsed{background:rgba(15,23,42,.6);backdrop-filter:blur(4px)}.panel.collapsed .action-grid,.panel.collapsed .combat-info,.panel.collapsed .combat-units,.panel.collapsed .game-log,.panel.collapsed .hero-info>.hero-details,.panel.collapsed .mana-dice,.panel.collapsed .movement-display,.panel.collapsed .units-container{display:none!important}.panel.collapsed .panel-header{margin-bottom:0}.panel.collapsed .panel-toggle{transform:rotate(180deg)}.toast-container{position:fixed;bottom:2rem;right:2rem;display:flex;flex-direction:column;gap:.75rem;z-index:9999}.toast{background:var(--glass-bg);backdrop-filter:var(--backdrop-blur);border:1px solid var(--glass-border);padding:1rem 1.5rem;border-radius:var(--radius-md);color:#fff;box-shadow:var(--glass-shadow);display:flex;align-items:center;gap:1rem;min-width:250px;transform:translateX(120%);animation:slide-in-toast .6s cubic-bezier(.2,.8,.2,1) forwards}@keyframes slide-in-toast{to{transform:translateX(0)}}.toast.hiding{animation:fade-out-toast .4s ease forwards}@keyframes fade-out-toast{to{opacity:0;transform:translateY(-20px) scale(.9)}}.toast.success{border-left:4px solid var(--color-mana-green)}.toast.error{border-left:4px solid var(--color-mana-red)}.toast.warning{border-left:4px solid var(--color-mana-gold)}.toast.info{border-left:4px solid var(--color-accent-primary)}.stat-pill{display:flex;align-items:center;gap:var(--spacing-sm);background:rgba(255,255,255,.03);padding:var(--spacing-sm) var(--spacing-md);border-radius:var(--radius-md);border:1px solid var(--glass-border);transition:var(--transition-fast)}.stat-pill:hover{background:rgba(255,255,255,.08);border-color:var(--glass-border-highlight);transform:translateY(-1px)}.stat-label{font-family:var(--font-heading);font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:var(--color-text-muted)}.stat-value{font-family:Outfit,sans-serif;font-size:1.4rem;font-weight:800;color:var(--color-accent-gold);text-shadow:0 0 10px hsla(var(--h-gold),80%,50%,.3)}.sidebar-left{animation:slideInLeft .6s cubic-bezier(.2,.8,.2,1)}.sidebar-right{animation:slideInRight .6s cubic-bezier(.2,.8,.2,1)}@keyframes slideInLeft{from{opacity:0;transform:translateX(-30px)}to{opacity:1;transform:translateX(0)}}@keyframes slideInRight{from{opacity:0;transform:translateX(30px)}to{opacity:1;transform:translateX(0)}}.time-indicator-container{display:flex;align-items:center;gap:var(--spacing-sm);background:rgba(0,0,0,.4);padding:.4rem 1rem;border-radius:2rem;border:1px solid var(--glass-border);box-shadow:inset 0 2px 4px rgba(0,0,0,.3);margin-left:var(--spacing-lg)}.time-icon{font-size:1.2rem;filter:drop-shadow(0 0 5px rgba(251, 191, 36, .6));animation:pulse-glow 3s infinite}@keyframes pulse-glow{0%,100%{filter:drop-shadow(0 0 5px rgba(251, 191, 36, .6));transform:scale(1)}50%{filter:drop-shadow(0 0 12px rgba(251, 191, 36, .9));transform:scale(1.1)}}.round-display{font-family:Outfit,sans-serif;font-weight:600;color:var(--color-text-secondary);text-transform:uppercase;font-size:.85rem;letter-spacing:.1em}.round-number{color:var(--color-accent-primary);font-size:1.1rem;margin-left:.2rem}.game-log{max-height:200px;overflow-y:auto;font-size:.875rem;display:flex;flex-direction:column;gap:var(--spacing-xs);padding-right:var(--spacing-xs)}.log-entry{padding:var(--spacing-sm);background:rgba(255,255,255,.03);border-radius:var(--radius-sm);border-left:3px solid var(--color-accent-primary);color:var(--color-text-secondary);transition:var(--transition-fast);animation:logFadeIn .3s ease-out}.log-entry:hover{background:rgba(255,255,255,.08);transform:translateX(2px)}@keyframes logFadeIn{from{opacity:0;transform:translateX(-10px)}to{opacity:1;transform:translateX(0)}}.log-entry.combat{border-left-color:var(--color-mana-red)}.log-entry.movement{border-left-color:var(--color-mana-green)}.log-entry.info{border-left-color:var(--color-mana-blue)}.log-entry.warning{border-left-color:#f59e0b}.log-entry.success{border-left-color:#10b981}.log-entry.error{border-left-color:#ef4444}.log-entry.level{border-left-color:#a855f7;background:rgba(168,85,247,.1)}.log-entry.reward{border-left-color:#fbbf24;background:rgba(251,191,36,.08)}.log-entry.has-details{cursor:pointer}.log-entry.has-details:hover{background:rgba(255,255,255,.12)}.log-header{display:flex;align-items:center;width:100%}.log-time{font-size:.7rem;color:var(--color-text-muted);margin-right:.4rem;opacity:.6;min-width:45px}.log-icon{margin-right:.4rem;font-size:.85rem}.log-message{flex:1;word-break:break-word}.log-message strong{color:var(--color-accent-gold)}.log-message em{font-style:italic;color:var(--color-accent-primary)}.glossary-term{border-bottom:1px dotted rgba(168,85,247,.6);cursor:help;color:var(--color-accent-secondary);transition:all .2s}.glossary-term:hover{color:var(--color-accent-primary);border-bottom-color:var(--color-accent-primary);background:rgba(168,85,247,.1);border-radius:2px}.log-count{margin-left:.5rem;font-size:.7rem;background:rgba(255,255,255,.15);padding:.1rem .4rem;border-radius:10px;color:var(--color-text-muted)}.log-expander{margin-left:.5rem;font-size:.7rem;color:var(--color-text-muted);transition:transform .3s ease}.log-entry.expanded .log-expander{transform:rotate(180deg)}.log-details{display:none;margin-top:.5rem;padding:.5rem;background:rgba(0,0,0,.2);border-radius:4px;font-size:.8rem;color:var(--color-text-secondary);border-left:2px solid rgba(255,255,255,.1)}.log-entry.expanded .log-details{display:block;animation:slideDown .2s ease-out}.log-details ul{list-style:none;padding:0;margin:0}.log-details li{margin-bottom:.2rem;display:flex;justify-content:space-between}.detail-key{color:var(--color-text-muted);margin-right:.5rem}.detail-value{color:var(--color-text-primary);text-align:right}.details-title{font-weight:700;color:var(--color-accent-primary);margin-bottom:.3rem;border-bottom:1px solid rgba(255,255,255,.1);padding-bottom:2px}@keyframes slideDown{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}.combat-phase-progress{display:flex;justify-content:center;align-items:center;gap:.5rem;padding:.75rem 1rem;background:rgba(0,0,0,.3);border-radius:8px;margin-bottom:.75rem}.phase-step{display:flex;align-items:center;gap:.25rem;padding:.3rem .6rem;border-radius:4px;font-size:.75rem;opacity:.4;transition:all .3s ease;background:rgba(255,255,255,.05)}.phase-step.active{opacity:1;background:var(--color-accent-primary);box-shadow:0 0 10px var(--color-accent-primary);transform:scale(1.1)}.phase-step.completed{opacity:.7;background:rgba(16,185,129,.3)}.phase-step-icon{font-size:1rem}.phase-connector{width:20px;height:2px;background:rgba(255,255,255,.2)}.phase-connector.completed{background:var(--color-accent-primary)}.active-combat{min-height:400px;border-color:var(--color-mana-red);box-shadow:0 0 20px rgba(239,68,68,.2)}.combat-panel h2{color:var(--color-mana-red);display:flex;align-items:center;gap:.5rem}.combat-status{padding:.75rem;background:rgba(0,0,0,.2);border-radius:var(--radius-sm);border-left:4px solid #3b82f6;margin-bottom:1rem}.combat-status strong{display:block;font-size:1.1rem;color:var(--color-text-primary)}.combat-status small{display:block;margin-top:.25rem;color:var(--color-text-secondary);font-style:italic;font-size:.85rem}.total-stat{text-align:center;padding:.5rem}.total-label{font-size:.75rem;text-transform:uppercase;color:var(--color-text-muted);letter-spacing:.05em}.total-value{font-size:1.8rem;font-weight:800;font-family:Outfit,sans-serif}.combat-prediction{background:rgba(0,0,0,.3);border-radius:var(--radius-sm);padding:1rem}.enemy-card{position:relative;background:rgba(255,255,255,.05);border:1px solid var(--glass-border);border-radius:var(--radius-md);padding:1rem;margin-bottom:1rem;transition:all .2s ease;display:flex;gap:1rem}.enemy-card:hover{background:rgba(255,255,255,.1);transform:translateY(-2px)}.enemy-card.blocked-enemy{opacity:.6;border-style:dashed;filter:grayscale(.5)}.enemy-card.boss-card{border:2px solid var(--color-accent-gold);background:linear-gradient(135deg,rgba(251,191,36,.1),rgba(0,0,0,.4));box-shadow:0 0 15px rgba(251,191,36,.2)}.enemy-icon{font-size:3rem;width:60px;height:60px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.enemy-details{flex:1}.enemy-name{font-size:1.1rem;font-weight:700;color:var(--color-text-primary);margin-bottom:.25rem}.enemy-stats{display:flex;gap:1rem;margin-bottom:.5rem}.enemy-stats .stat{display:flex;align-items:center;gap:.3rem;font-weight:600;font-size:1rem}.enemy-traits{display:flex;flex-wrap:wrap;gap:.4rem;margin-top:.5rem}.ability-icon{font-size:1.2rem;cursor:help;transition:transform .2s ease}.ability-icon:hover{transform:scale(1.2)}.boss-health-section{margin-top:1rem;padding-top:.75rem;border-top:1px solid rgba(255,255,255,.1)}.boss-health-bar{width:100%;height:8px;background:rgba(0,0,0,.5);border-radius:4px;overflow:hidden;margin-top:.4rem}.boss-health-fill{height:100%;transition:width .3s ease-out}.block-badge{position:absolute;bottom:-8px;right:10px;background:#3b82f6;color:#fff;padding:2px 10px;border-radius:12px;font-size:.75rem;font-weight:800;box-shadow:0 2px 4px rgba(0,0,0,.3);z-index:5}.fortified-badge{position:absolute;top:-8px;right:10px;background:#92400e;color:#fff;padding:2px 8px;border-radius:4px;font-size:.7rem;font-weight:700;border:1px solid var(--color-accent-gold);box-shadow:0 2px 4px rgba(0,0,0,.3);z-index:5}.combat-units-grid{display:grid;grid-template-columns:1fr;gap:.75rem;margin-top:.5rem}.unit-combat-card{padding:.75rem;background:rgba(139,92,246,.1);border:1px solid rgba(139,92,246,.3);border-radius:var(--radius-sm);transition:all .2s ease;cursor:pointer}.unit-combat-card:hover:not(.not-ready){background:rgba(139,92,246,.2);border-color:rgba(139,92,246,.6);transform:translateX(4px)}.unit-combat-card.not-ready{opacity:.5;filter:grayscale(.5);cursor:not-allowed}.attack-phase{border-left-color:var(--color-mana-red)!important}.ranged-phase{border-left-color:var(--color-mana-green)!important}.block-phase{border-left-color:#3b82f6!important}.combat-totals-row{display:flex;gap:1rem;justify-content:space-around;padding:.5rem 0;border-bottom:1px solid rgba(255,255,255,.1);margin-bottom:.75rem}.block-stat .total-value{color:#4a9eff}.attack-stat .total-value{color:#ff4a4a}.ranged-stat .total-value{color:#fbbf24}.siege-stat .total-value{color:#f59e0b;border-left:1px solid rgba(255,255,255,.2);padding-left:1rem}.prediction-details{display:flex;flex-direction:column;gap:.5rem}.prediction-danger{color:#ef4444;display:flex;align-items:center;gap:.5rem;font-size:1rem}.prediction-safe{color:#10b981;font-size:1rem}.prediction-success{color:#fbbf24;margin-top:.5rem;font-size:.95rem}.poison-warning{color:#10b981;font-size:.8rem;background:rgba(16,185,129,.1);padding:2px 6px;border-radius:4px}.boss-health-info{display:flex;justify-content:space-between;font-size:.9rem;margin-bottom:.4rem}.boss-phase-name{color:var(--color-accent-gold);font-weight:600}.boss-enraged-label{color:#ef4444;font-size:.85rem;margin-top:.4rem;font-weight:700}.blocked-label{color:#10b981;font-size:.9rem;font-weight:700}.game-tooltip{position:fixed;z-index:10000;pointer-events:none;max-width:320px;background:var(--glass-bg);backdrop-filter:var(--backdrop-blur);-webkit-backdrop-filter:var(--backdrop-blur);border:1px solid var(--glass-border);border-radius:var(--radius-md);padding:var(--spacing-md);box-shadow:var(--glass-shadow);color:var(--color-text-primary);font-size:.9rem;line-height:1.5;transition:opacity .2s ease,transform .2s ease;transform-origin:bottom center}.game-tooltip.below{transform-origin:top center}.tooltip-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--spacing-sm)}.tooltip-name{font-family:var(--font-display);font-size:1.1rem;font-weight:700;color:var(--color-accent-gold);letter-spacing:.05em}.tooltip-divider{height:1px;background:linear-gradient(90deg,transparent,var(--glass-border-highlight),transparent);margin:var(--spacing-sm) 0}.tooltip-description{color:var(--color-text-secondary);font-size:.85rem;font-style:italic}.tooltip-ability-desc{display:flex;flex-direction:column}.tooltip-stat-row{display:flex;justify-content:space-between;margin-bottom:4px;font-size:.85rem}.tooltip-stat-row .value{font-weight:700;color:var(--color-accent-gold)}.mana-icon{display:inline-block;margin:0 2px;filter:drop-shadow(0 0 5px rgba(255, 255, 255, .2))}.tooltip-card-color{font-size:1.2rem}.tooltip-header .tooltip-icon{font-size:1.5rem;margin-right:var(--spacing-sm)}