import{logger}from"./logger.js";import{performanceMonitor}from"./performanceMonitor.js";export class DebugManager{constructor(game){this.game=game;this.active=false;this.showCoordinates=false;this.setupConsoleAccess();this.createDebugUI()}setupConsoleAccess(){window.game=this.game;window.debug=this;logger.info("ðŸ”§ Debug Tools initialized. Access via window.game or window.debug")}createDebugUI(){const toggleBtn=document.createElement("button");toggleBtn.textContent="ðŸ”§";toggleBtn.className="debug-toggle";toggleBtn.style.zIndex="100000";toggleBtn.style.position="fixed";toggleBtn.style.top="10px";toggleBtn.style.left="10px";toggleBtn.onclick=()=>this.togglePanel();const target=document.body;target.appendChild(toggleBtn);this.panel=document.createElement("div");this.panel.className="debug-panel hidden";this.panel.innerHTML=`\n            <div class="debug-header">\n                <h3>Debug Tools</h3>\n                <button class="close-btn">Ã—</button>\n            </div>\n            <div class="debug-content">\n                <div class="debug-section">\n                    <h4>Resources</h4>\n                    <button onclick="debug.addCrystals()">+ Crystals</button>\n                    <button onclick="debug.addFame()">+ Fame</button>\n                    <button onclick="debug.addReputation()">+ Rep</button>\n                    <button onclick="debug.addInfluence()">+ Influence</button>\n                </div>\n                <div class="debug-section">\n                    <h4>Hero</h4>\n                    <button onclick="debug.healAll()">Heal All</button>\n                    <button onclick="debug.drawCard()">Draw Card</button>\n                    <button onclick="debug.resetHand()">Reset Hand</button>\n                    <button onclick="debug.addUnit()">Add Unit</button>\n                </div>\n                <div class="debug-section">\n                    <h4>Map</h4>\n                    <button onclick="debug.toggleCoordinates()">Toggle Coords</button>\n                    <button onclick="debug.revealMap()">Reveal Map</button>\n                    <button onclick="debug.teleportMode()">Teleport</button>\n                </div>\n                <div class="debug-section">\n                    <h4>Combat</h4>\n                    <button onclick="debug.spawnEnemy()">Spawn Enemy</button>\n                    <button onclick="debug.killEnemies()">Kill All</button>\n                </div>\n                <div class="debug-section">\n                    <h4>Performance</h4>\n                    <button onclick="debug.toggleFPS()">Toggle FPS</button>\n                </div>\n                <div class="debug-section debug-log-section">\n                    <div class="debug-log-header">\n                        <h4>Debug Log</h4>\n                        <div class="debug-log-actions">\n                            <button onclick="logger.clear()">Clear</button>\n                        </div>\n                    </div>\n                    <div id="debug-log-container" class="debug-log-container"></div>\n                </div>\n            </div>\n        `;this.panel.querySelector(".close-btn").onclick=()=>this.togglePanel();target.appendChild(this.panel);this.setupLoggerUI()}setupLoggerUI(){const container=document.getElementById("debug-log-container");if(!container)return;logger.addListener((entry,_allLogs)=>{if(!entry){container.innerHTML="";return}const item=document.createElement("div");item.className=`log-item log-${entry.levelName.toLowerCase()}`;item.innerHTML=`\n                <span class="log-time">${entry.timestamp.toLocaleTimeString()}</span>\n                <span class="log-level">[${entry.levelName}]</span>\n                <span class="log-message">${entry.message}</span>\n            `;container.appendChild(item);container.scrollTop=container.scrollHeight;if(container.children&&container.children.length>50){const first=container.firstElementChild||container.firstChild;if(first)container.removeChild(first)}})}togglePanel(){this.panel.classList.toggle("hidden")}addCrystals(){this.game.hero.crystals.red+=5;this.game.hero.crystals.blue+=5;this.game.hero.crystals.green+=5;this.game.hero.crystals.white+=5;this.game.addLog("Debug: Added 5 of each crystal","info");this.game.updateStats()}addFame(){this.game.hero.gainFame(10);this.game.addLog("Debug: Added 10 Fame","info");this.game.updateStats()}addReputation(){this.game.hero.changeReputation(1);this.game.addLog("Debug: +1 Reputation","info");this.game.updateStats()}addInfluence(){this.game.hero.influencePoints+=10;this.game.addLog("Debug: +10 Influence","info");this.game.updateStats()}healAll(){this.game.hero.wounds=[];this.game.hero.units.forEach(u=>u.heal());this.game.addLog("Debug: Healed hero and units","info");this.game.updateStats();this.game.renderHand()}drawCard(){const card=this.game.hero.drawCard();if(card){this.game.addLog(`Debug: Drew ${card.name}`,"info");this.game.renderHand();this.game.updateStats()}else{this.game.addLog("Debug: Deck empty","warning")}}resetHand(){this.game.hero.discard.push(...this.game.hero.hand);this.game.hero.hand=[];this.game.hero.drawCards();this.game.addLog("Debug: Reset hand","info");this.game.renderHand();this.game.updateStats()}addUnit(){const types=["peasants","thugs","guards"];const type=types[Math.floor(Math.random()*types.length)];import("./unit.js").then(module=>{const unit=module.createUnit(type);if(this.game.hero.addUnit(unit)){this.game.addLog(`Debug: Added ${unit.getName()}`,"info");this.game.updateStats()}else{this.game.addLog("Debug: Command limit reached","warning")}})}toggleCoordinates(){this.showCoordinates=!this.showCoordinates;this.game.hexGrid.debugMode=this.showCoordinates;this.game.render();this.game.addLog(`Debug: Coordinates ${this.showCoordinates?"ON":"OFF"}`,"info")}revealMap(){this.game.addLog("Debug: Reveal Map not implemented yet","warning")}teleportMode(){this.game.addLog("Debug: Click any hex to teleport","info");this.game.debugTeleport=true}spawnEnemy(){const enemy={name:"Debug Orc",armor:3,attack:3,fame:2,icon:"ðŸ‘¹",position:{...this.game.hero.position}};this.game.enemies.push(enemy);this.game.render();this.game.addLog("Debug: Spawned enemy at hero location","info")}killEnemies(){this.game.enemies=[];this.game.render();this.game.addLog("Debug: Killed all enemies","info")}toggleFPS(){performanceMonitor.toggleOverlay();const state=performanceMonitor.showOverlay?"ON":"OFF";this.game.addLog(`Debug: FPS Overlay ${state}`,"info")}}