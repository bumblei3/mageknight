<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mage Knight - Base Game</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="game-container">
        <!-- Header -->
        <header class="game-header">
            <div class="header-left">
                <h1>ğŸ—¡ï¸ MAGE KNIGHT</h1>
            </div>
            <div class="header-right">
                <div class="stat-pill">
                    <span class="stat-label">Ruhm</span>
                    <span class="stat-value" id="fame-value">0</span>
                </div>
                <div class="stat-pill">
                    <span class="stat-label">Ansehen</span>
                    <span class="stat-value" id="reputation-value">0</span>
                </div>
                <button class="btn-help" id="help-btn" title="Hilfe anzeigen">â“</button>
            </div>
        </header>

        <!-- Main Game Area -->
        <div class="game-main">
            <!-- Left Sidebar -->
            <aside class="sidebar sidebar-left">
                <div class="panel hero-panel">
                    <h2>Held</h2>
                    <div class="hero-info">
                        <div class="hero-name" id="hero-name">Goldyx</div>
                        <div class="hero-stats">
                            <div class="stat-row">
                                <span class="stat-icon">ğŸ›¡ï¸</span>
                                <span class="stat-text">RÃ¼stung: <strong id="hero-armor">2</strong></span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-icon">ğŸ´</span>
                                <span class="stat-text">Handlimit: <strong id="hero-handlimit">5</strong></span>
                            </div>
                            <div class="stat-row">
                                <span class="stat-icon">ğŸ’”</span>
                                <span class="stat-text">Verletzungen: <strong id="hero-wounds">0</strong></span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel action-panel">
                    <h2>Aktionen</h2>
                    <button class="btn btn-primary" id="end-turn-btn">Zug beenden</button>
                    <button class="btn btn-secondary" id="rest-btn">Rasten</button>
                </div>

                <div class="panel movement-panel">
                    <h2>Bewegung</h2>
                    <div class="movement-info">
                        <div class="stat-row">
                            <span class="stat-icon">ğŸ‘£</span>
                            <span class="stat-text">Punkte: <strong id="movement-points">0</strong></span>
                        </div>
                    </div>
                </div>

                <div class="panel phase-panel">
                    <h2>Aktuelle Phase</h2>
                    <div class="phase-indicator" id="phase-indicator">
                        <div class="phase-text">Erkundung</div>
                        <div class="phase-hint" id="phase-hint">Spiele Karten oder bewege dich</div>
                    </div>
                </div>
            </aside>

            <!-- Game Board -->
            <main class="game-board-container">
                <div class="board-wrapper">
                    <canvas id="game-board" width="800" height="600"></canvas>
                </div>
            </main>

            <!-- Right Sidebar -->
            <aside class="sidebar sidebar-right">
                <div class="panel mana-panel">
                    <h2>Mana-Quelle</h2>
                    <div class="mana-dice" id="mana-source">
                        <!-- Mana dice will be added dynamically -->
                    </div>
                </div>

                <div class="panel combat-panel" id="combat-panel" style="display: none;">
                    <h2>Kampf</h2>
                    <div class="combat-info" id="combat-info">
                        <!-- Combat information will be displayed here -->
                    </div>
                </div>

                <div class="panel log-panel">
                    <h2>Spielprotokoll</h2>
                    <div class="game-log" id="game-log">
                        <div class="log-entry">Spiel gestartet</div>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Keyboard Shortcuts Info -->
        <div class="shortcuts-bar" id="shortcuts-bar">
            <div class="shortcut-item">
                <kbd>1-5</kbd> Karten spielen
            </div>
            <div class="shortcut-item">
                <kbd>Space</kbd> Zug beenden
            </div>
            <div class="shortcut-item">
                <kbd>H</kbd> Hilfe
            </div>
            <div class="shortcut-item">
                <kbd>Esc</kbd> Abbrechen
            </div>
        </div>

        <!-- Hand Cards Area -->
        <div class="hand-area">
            <h2>Handkarten</h2>
            <div class="cards-container" id="hand-cards">
                <!-- Cards will be added dynamically -->
            </div>
        </div>

        <!-- Play Area -->
        <div class="play-area" id="play-area" style="display: none;">
            <h3>Gespielte Karten</h3>
            <div class="played-cards" id="played-cards">
                <!-- Played cards will be shown here -->
            </div>
        </div>
    </div>

    <!-- Modal for card details -->
    <div class="modal" id="card-modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <div id="modal-card-details"></div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal" id="help-modal">
        <div class="modal-content help-modal-content">
            <span class="modal-close" id="help-close">&times;</span>
            <h2>ğŸ—¡ï¸ Mage Knight Hilfe</h2>

            <div class="help-tabs">
                <button class="help-tab active" data-tab="basics">Grundlagen</button>
                <button class="help-tab" data-tab="cards">Karten</button>
                <button class="help-tab" data-tab="movement">Bewegung</button>
                <button class="help-tab" data-tab="combat">Kampf</button>
                <button class="help-tab" data-tab="terrain">Terrain</button>
            </div>

            <div class="help-content">
                <!-- Basics Tab -->
                <div class="help-tab-content active" id="help-basics">
                    <h3>Spielziel</h3>
                    <p>Besiege alle Feinde auf der Karte, um zu gewinnen!</p>

                    <h3>Spielablauf</h3>
                    <ol>
                        <li><strong>Karten spielen</strong> - Klicke auf Karten in deiner Hand</li>
                        <li><strong>Bewegen</strong> - Klicke auf Hex-Felder um dich zu bewegen</li>
                        <li><strong>KÃ¤mpfen</strong> - Betritt Felder mit Feinden</li>
                        <li><strong>Zug beenden</strong> - Klicke "Zug beenden" fÃ¼r neue Karten</li>
                    </ol>

                    <h3>Wichtige Tastenbelegung</h3>
                    <ul>
                        <li><strong>Linksklick auf Karte</strong> - Spielt Basis-Wirkung</li>
                        <li><strong>Rechtsklick auf Karte</strong> - Spielt Karte seitlich (+1)</li>
                        <li><strong>Klick auf Hex</strong> - Bewegt Held oder wÃ¤hlt Feld aus</li>
                    </ul>

                    <h3>Held Stats</h3>
                    <ul>
                        <li><strong>ğŸ›¡ï¸ RÃ¼stung</strong> - Reduziert erhaltenen Schaden</li>
                        <li><strong>ğŸ´ Handlimit</strong> - Max. Karten auf der Hand</li>
                        <li><strong>ğŸ’” Verletzungen</strong> - Blockieren Kartenslots</li>
                        <li><strong>â­ Ruhm</strong> - Punkte fÃ¼r besiegte Feinde</li>
                        <li><strong>ğŸ’¬ Ansehen</strong> - Beeinflusst Interaktionen</li>
                    </ul>
                </div>

                <!-- Cards Tab -->
                <div class="help-tab-content" id="help-cards">
                    <h3>Kartentypen</h3>
                    <div class="help-card-types">
                        <div class="help-card-type">
                            <span class="help-icon" style="color: #10b981;">ğŸŒ¿</span>
                            <strong>GrÃ¼ne Karten</strong>
                            <p>Bewegungskarten - Geben Bewegungspunkte</p>
                        </div>
                        <div class="help-card-type">
                            <span class="help-icon" style="color: #ef4444;">âš”ï¸</span>
                            <strong>Rote Karten</strong>
                            <p>Angriffskarten - FÃ¼gen Feinden Schaden zu</p>
                        </div>
                        <div class="help-card-type">
                            <span class="help-icon" style="color: #3b82f6;">ğŸ›¡ï¸</span>
                            <strong>Blaue Karten</strong>
                            <p>Block-Karten - Blocken Feindangriffe</p>
                        </div>
                        <div class="help-card-type">
                            <span class="help-icon" style="color: #f3f4f6;">ğŸ’¬</span>
                            <strong>WeiÃŸe Karten</strong>
                            <p>Einfluss/Heilung - FÃ¼r Interaktionen</p>
                        </div>
                    </div>

                    <h3>Kartenwirkungen</h3>
                    <ul>
                        <li><strong>Basic</strong> - Grundwirkung ohne Mana</li>
                        <li><strong>Strong</strong> - VerstÃ¤rkte Wirkung mit Mana (in Entwicklung)</li>
                        <li><strong>Seitlich spielen</strong> - Jede Karte kann fÃ¼r +1 Bewegung/Angriff/Block/Einfluss
                            gespielt werden</li>
                    </ul>

                    <h3>Kartenverwaltung</h3>
                    <p>Am Ende deines Zugs:</p>
                    <ul>
                        <li>Gespielte Karten â†’ Ablage</li>
                        <li>Ziehe neue Karten bis Handlimit</li>
                        <li>Wenn Deck leer: Ablage wird gemischt</li>
                    </ul>
                </div>

                <!-- Movement Tab -->
                <div class="help-tab-content" id="help-movement">
                    <h3>Bewegung Schritt fÃ¼r Schritt</h3>
                    <ol>
                        <li>Spiele eine oder mehrere <strong>grÃ¼ne Bewegungskarten</strong></li>
                        <li>Bewegungspunkte werden addiert (oben links im Panel)</li>
                        <li>Erreichbare Felder werden <strong>violett hervorgehoben</strong></li>
                        <li>Klicke auf ein hervorgehobenes Feld</li>
                        <li>Dein Held bewegt sich dorthin</li>
                        <li>Bewegungskosten werden abgezogen</li>
                    </ol>

                    <h3>Bewegungskosten</h3>
                    <p>Jedes Terrain hat unterschiedliche Kosten:</p>
                    <ul>
                        <li>ğŸŒ¾ <strong>Ebenen</strong> - 2 Punkte</li>
                        <li>ğŸŒ² <strong>Wald</strong> - 3 Punkte</li>
                        <li>â›°ï¸ <strong>HÃ¼gel</strong> - 3 Punkte</li>
                        <li>ğŸ”ï¸ <strong>Berge</strong> - 5 Punkte</li>
                        <li>ğŸœï¸ <strong>WÃ¼ste</strong> - 3 Punkte</li>
                        <li>â˜ ï¸ <strong>Ã–dland</strong> - 3 Punkte</li>
                        <li>ğŸ’§ <strong>Wasser</strong> - Unpassierbar</li>
                    </ul>

                    <h3>Tipps</h3>
                    <ul>
                        <li>Plane deine Route vorher durch</li>
                        <li>Ebenen sind am gÃ¼nstigsten</li>
                        <li>Vermeide Berge wenn mÃ¶glich</li>
                        <li>Du kannst mehrere Bewegungskarten kombinieren</li>
                    </ul>
                </div>

                <!-- Combat Tab -->
                <div class="help-tab-content" id="help-combat">
                    <h3>Kampf starten</h3>
                    <p>Ein Kampf beginnt automatisch, wenn du ein Feld mit einem Feind betrittst.</p>

                    <h3>Kampfphasen</h3>
                    <div class="combat-phases">
                        <div class="combat-phase">
                            <strong>1ï¸âƒ£ Block-Phase</strong>
                            <ul>
                                <li>Spiele <strong>blaue Block-Karten</strong></li>
                                <li>Blocke den Feind-Angriff vollstÃ¤ndig</li>
                                <li>Block â‰¥ Feind-Angriff â†’ Feind geblockt</li>
                                <li>Klicke "Zug beenden" fÃ¼r nÃ¤chste Phase</li>
                            </ul>
                        </div>
                        <div class="combat-phase">
                            <strong>2ï¸âƒ£ Schadens-Phase</strong>
                            <ul>
                                <li>Ungeblockte Feinde fÃ¼gen Schaden zu</li>
                                <li>Schaden / Deine RÃ¼stung = Verletzungen (aufgerundet)</li>
                                <li>Verletzungen kommen auf deine Hand</li>
                                <li>Phase lÃ¤uft automatisch ab</li>
                            </ul>
                        </div>
                        <div class="combat-phase">
                            <strong>3ï¸âƒ£ Angriffs-Phase</strong>
                            <ul>
                                <li>Spiele <strong>rote Angriffs-Karten</strong></li>
                                <li>Angriff â‰¥ Feind-RÃ¼stung â†’ Feind besiegt</li>
                                <li>Erhalte Ruhm fÃ¼r besiegte Feinde</li>
                                <li>Kampf endet automatisch</li>
                            </ul>
                        </div>
                    </div>

                    <h3>Feind-Stats</h3>
                    <ul>
                        <li><strong>ğŸ›¡ï¸ RÃ¼stung</strong> - Muss Ã¼berwunden werden</li>
                        <li><strong>âš”ï¸ Angriff</strong> - Schaden den der Feind zufÃ¼gt</li>
                        <li><strong>â­ Ruhm</strong> - Belohnung fÃ¼r Sieg</li>
                    </ul>

                    <h3>Kampf-Tipps</h3>
                    <ul>
                        <li>Blocke starke Gegner wenn mÃ¶glich</li>
                        <li>Spare Angriffskarten fÃ¼r schwere Feinde auf</li>
                        <li>Kombiniere mehrere Karten fÃ¼r groÃŸe Wirkungen</li>
                        <li>Verletzungen kÃ¶nnen nur durch Rasten/Heilung entfernt werden</li>
                    </ul>
                </div>

                <!-- Terrain Tab -->
                <div class="help-tab-content" id="help-terrain">
                    <h3>Terrain-Typen</h3>

                    <div class="terrain-list">
                        <div class="terrain-item">
                            <span class="terrain-icon">ğŸŒ¾</span>
                            <div>
                                <strong>Ebenen</strong>
                                <p>Kosten: 2 | Offenes Grasland, leicht zu durchqueren</p>
                            </div>
                        </div>

                        <div class="terrain-item">
                            <span class="terrain-icon">ğŸŒ²</span>
                            <div>
                                <strong>Wald</strong>
                                <p>Kosten: 3 | Dichter Wald, erschwert Bewegung</p>
                            </div>
                        </div>

                        <div class="terrain-item">
                            <span class="terrain-icon">â›°ï¸</span>
                            <div>
                                <strong>HÃ¼gel</strong>
                                <p>Kosten: 3 | HÃ¼geliges GelÃ¤nde</p>
                            </div>
                        </div>

                        <div class="terrain-item">
                            <span class="terrain-icon">ğŸ”ï¸</span>
                            <div>
                                <strong>Berge</strong>
                                <p>Kosten: 5 | Hohe Berge, sehr schwer zu passieren</p>
                            </div>
                        </div>

                        <div class="terrain-item">
                            <span class="terrain-icon">ğŸœï¸</span>
                            <div>
                                <strong>WÃ¼ste</strong>
                                <p>Kosten: 3 | Trockene WÃ¼ste</p>
                            </div>
                        </div>

                        <div class="terrain-item">
                            <span class="terrain-icon">â˜ ï¸</span>
                            <div>
                                <strong>Ã–dland</strong>
                                <p>Kosten: 3 | Verfluchtes, unwirtliches Land</p>
                            </div>
                        </div>

                        <div class="terrain-item">
                            <span class="terrain-icon">ğŸ’§</span>
                            <div>
                                <strong>Wasser</strong>
                                <p>Kosten: âˆ | <strong>Unpassierbar</strong></p>
                            </div>
                        </div>
                    </div>

                    <h3>Strategie-Tipps</h3>
                    <ul>
                        <li>Plane deine Route entlang von Ebenen wenn mÃ¶glich</li>
                        <li>Vermeide Berge auÃŸer in NotfÃ¤llen</li>
                        <li>Manchmal ist eine lÃ¤ngere Route Ã¼ber Ebenen schneller</li>
                        <li>Spare Bewegungspunkte fÃ¼r den Kampf</li>
                    </ul>
                </div>
            </div>

            <div class="help-footer">
                <p><strong>Tipp:</strong> DrÃ¼cke <kbd>Esc</kbd> oder klicke auÃŸerhalb, um die Hilfe zu schlieÃŸen</p>
            </div>
        </div>
    </div>

    <!-- Rest Modal -->
    <div class="modal" id="rest-modal">
        <div class="modal-content rest-modal-content">
            <span class="modal-close" id="rest-close">&times;</span>
            <h2>ğŸ’¤ Rasten</h2>

            <p class="rest-explanation">
                WÃ¤hle Karten aus, die du ablegen mÃ¶chtest. Du ziehst dann neue Karten bis zu deinem Handlimit.
                <strong>Hinweis:</strong> Beim Rasten erhÃ¤ltst du keine neuen Mana-WÃ¼rfel.
            </p>

            <div class="rest-cards" id="rest-cards">
                <!-- Cards will be dynamically added here -->
            </div>

            <div class="rest-actions">
                <button class="btn btn-secondary" id="rest-cancel">Abbrechen</button>
                <button class="btn btn-primary" id="rest-confirm">Rasten bestÃ¤tigen</button>
            </div>
        </div>
    </div>

    <!-- Tutorial overlay -->
    <div class="tutorial-overlay" id="tutorial-overlay" style="display: none;">
        <div class="tutorial-box">
            <h3 id="tutorial-title">Tutorial</h3>
            <p id="tutorial-text"></p>
            <div class="tutorial-buttons">
                <button class="btn btn-secondary" id="tutorial-skip">Ãœberspringen</button>
                <button class="btn btn-primary" id="tutorial-next">Weiter</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/game.js"></script>
</body>

</html>