/* Mobile and Responsive Styles for Mage Knight */

/* ========================================
   TABLET (< 1024px)
   ======================================== */
@media (max-width: 1024px) {
    :root {
        --spacing-sm: 0.4rem;
        --spacing-md: 0.6rem;
        --spacing-lg: 0.8rem;
        --spacing-xl: 1rem;
    }

    .game-container {
        padding: var(--spacing-sm);
    }

    header {
        flex-wrap: wrap;
        gap: var(--spacing-md);
    }

    .game-main {
        flex-direction: column;
    }

    .sidebar {
        width: 100%;
        max-width: 100%;
    }

    .sidebar-left,
    .sidebar-right {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        gap: var(--spacing-md);
    }

    .sidebar-left .panel,
    .sidebar-right .panel {
        flex: 1 1 calc(50% - var(--spacing-md));
        min-width: 200px;
    }

    .game-board-container {
        width: 100%;
        order: -1;
        /* Move board to top */
    }

    #game-board {
        width: 100%;
        height: auto;
        aspect-ratio: 4 / 3;
    }

    .hand-area {
        padding: var(--spacing-md);
    }

    .cards-container {
        gap: var(--spacing-sm);
    }

    .card {
        min-width: 120px;
        max-width: 140px;
    }
}

/* ========================================
   PHONE (< 768px)
   ======================================== */
@media (max-width: 768px) {
    :root {
        --spacing-sm: 0.3rem;
        --spacing-md: 0.5rem;
        --spacing-lg: 0.7rem;
        --spacing-xl: 0.9rem;
        --font-size-sm: 0.75rem;
        --font-size-md: 0.875rem;
        --font-size-lg: 1rem;
    }

    body {
        font-size: var(--font-size-md);
    }

    h1 {
        font-size: 1.25rem;
    }

    h2 {
        font-size: 1rem;
    }

    h3 {
        font-size: 0.875rem;
    }

    header {
        padding: var(--spacing-md);
    }

    .header-right {
        width: 100%;
        justify-content: space-between;
    }

    .stat-pill {
        font-size: var(--font-size-sm);
        padding: 0.3rem 0.6rem;
    }

    /* Stack panels vertically */
    .sidebar-left,
    .sidebar-right {
        flex-direction: column;
    }

    .sidebar-left .panel,
    .sidebar-right .panel {
        flex: 1 1 auto;
        min-width: 100%;
    }

    /* Optimize board for mobile */
    #game-board {
        aspect-ratio: 3 / 4;
        touch-action: none;
        /* Prevent default touch behaviors */
    }

    /* Touch-optimized buttons */
    .btn,
    .btn-primary,
    .btn-secondary,
    .btn-help,
    .btn-icon {
        min-height: 44px;
        min-width: 44px;
        font-size: var(--font-size-md);
        padding: 0.6rem 1rem;
    }

    .btn-icon {
        font-size: 1.25rem;
    }

    /* Cards optimized for touch */
    .card {
        min-width: 100px;
        max-width: 120px;
        font-size: var(--font-size-sm);
    }

    .card-name {
        font-size: var(--font-size-sm);
    }

    .card-effect {
        font-size: 0.7rem;
    }

    /* Mana dice touch-friendly */
    .mana-die {
        min-width: 44px;
        min-height: 44px;
    }

    /* Shortcuts bar - horizontal scroll on mobile */
    .shortcuts-bar {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        /* Firefox */
        padding: var(--spacing-sm) var(--spacing-md);
    }

    .shortcuts-bar::-webkit-scrollbar {
        display: none;
        /* Chrome/Safari */
    }

    .shortcut-item {
        flex-shrink: 0;
        font-size: var(--font-size-sm);
    }

    kbd {
        font-size: 0.7rem;
        padding: 0.2rem 0.4rem;
    }

    /* Modal optimization */
    .modal-content {
        width: 95%;
        max-height: 90vh;
        overflow-y: auto;
        margin: 5vh auto;
    }

    .help-modal-content,
    .rest-modal-content,
    .site-modal-content,
    .level-up-content {
        padding: var(--spacing-lg);
    }

    /* Help tabs - make scrollable */
    .help-tabs {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }

    .help-tab {
        flex-shrink: 0;
        font-size: var(--font-size-sm);
        padding: 0.4rem 0.8rem;
    }

    /* Reduce panel spacing */
    .panel {
        padding: var(--spacing-md);
        margin-bottom: var(--spacing-sm);
    }

    /* Combat panel optimization */
    .combat-info {
        font-size: var(--font-size-sm);
    }

    /* Log panel - limit height on mobile */
    .game-log {
        max-height: 150px;
    }

    .log-entry {
        font-size: var(--font-size-sm);
        padding: 0.3rem;
    }

    /* Stats rows */
    .stat-row {
        font-size: var(--font-size-sm);
    }
}

/* ========================================
   SMALL PHONE (< 480px)
   ======================================== */
@media (max-width: 480px) {
    h1 {
        font-size: 1.1rem;
    }

    .card {
        min-width: 80px;
        max-width: 100px;
    }

    .cards-container {
        gap: 0.2rem;
    }

    /* Even tighter spacing */
    .panel {
        padding: var(--spacing-sm);
    }

    /* Hide less critical panels on very small screens */
    .log-panel {
        max-height: 100px;
    }

    /* Simplified button text */
    #end-turn-btn,
    #rest-btn,
    #explore-btn {
        font-size: 0.8rem;
        padding: 0.5rem 0.7rem;
    }
}

/* ========================================
   TOUCH ENHANCEMENTS
   ======================================== */

/* Larger tap targets for interactive elements */
@media (hover: none) and (pointer: coarse) {

    .card,
    .mana-die,
    .btn,
    button {
        min-height: 44px;
        cursor: pointer;
        -webkit-tap-highlight-color: rgba(139, 92, 246, 0.3);
    }

    /* Remove hover effects on touch devices */
    .card:hover {
        transform: translateY(0);
    }

    /* Add active state for touch feedback */
    .card:active {
        transform: scale(0.95);
        transition: transform 0.1s ease;
    }

    .btn:active,
    button:active {
        transform: scale(0.97);
    }

    .mana-die:active {
        transform: scale(0.9);
    }

    /* Prevent text selection on touch */
    .card,
    .btn,
    button,
    .mana-die,
    .panel h2,
    .shortcuts-bar {
        -webkit-user-select: none;
        user-select: none;
    }
}

/* ========================================
   LANDSCAPE ORIENTATION
   ======================================== */
@media (max-width: 768px) and (orientation: landscape) {
    .game-main {
        flex-direction: row;
    }

    .sidebar-left,
    .sidebar-right {
        width: 30%;
        max-height: calc(100vh - 120px);
        overflow-y: auto;
    }

    .game-board-container {
        width: 40%;
        order: 0;
    }

    #game-board {
        aspect-ratio: 4 / 3;
    }

    .hand-area {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(15, 15, 30, 0.95);
        backdrop-filter: blur(10px);
        z-index: 100;
        padding: var(--spacing-sm);
    }

    .cards-container {
        justify-content: center;
    }
}

/* ========================================
   ACCESSIBILITY
   ======================================== */

/* High contrast mode support */
@media (prefers-contrast: high) {

    .card,
    .panel,
    .btn {
        border-width: 2px;
    }

    .card-name,
    .stat-value,
    h2 {
        font-weight: 700;
    }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }

    .card:hover,
    .card:active {
        transform: none;
    }
}

/* Print styles */
@media print {

    .shortcuts-bar,
    .btn,
    button,
    .modal-close,
    header .header-right {
        display: none;
    }

    .game-main {
        flex-direction: column;
    }

    .panel {
        page-break-inside: avoid;
    }
}